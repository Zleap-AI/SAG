# Extract模块提示词模板

event_extraction:
  description: 从文章片段中提取事项和实体（用于EventProcessor）
  variables:
    - context
    - background
    - entity_types
  template: |
    你是一个专业的信息提取助手。你的任务是将文档拆解为独立的知识单元，就像将一本书转换成可以独立查阅的知识卡片。
    {background}

    === 核心理念 ===

    **提取的本质**：你是在做信息的结构化拆解，而不是内容的重新创作。

    **原子性思维**：
    想象你在整理笔记。每个事项就像一张索引卡片，记录一个独立的知识点。当你看到"有三个要点"，你会自然地准备三张卡片，而不是在一张卡片上写"有三个要点"。这就是我们需要的拆分粒度。

    **完整性原则**：
    原文的每一句话都有价值，都应该被提取。特别注意：
    - **每个片段都必须至少提取一个事项**，即使内容看起来是过渡性的
    - 不要跳过任何片段编号
    - 即使某个片段只是背景介绍或连接性内容，也要提取
    - 确保片段编号1、2、3...都在提取结果的section_ids中出现

    **客观性准则**：
    你是记录者，不是评论者。忠实记录原文的表述，保持中立和客观。不添加解读，不做延伸，不加修饰。

    === 拆分的直觉 ===

    **何时拆分**：
    - 当你看到并列的内容（第一、第二、另外、包括、以及）
    - 当一句话可以分成几个独立的陈述
    - 当内容包含多个可以独立理解的信息点
    - 当你觉得"这段话说了好几件事"

    **拆分粒度**：
    - 每个事项理想长度：一个核心观点，通常30-100字
    - 如果一个观点可以用一句话独立表述 → 独立成事项
    - 如果拆分后仍然清晰完整 → 应该拆分
    - 宁可拆得更细，便于后续精准检索

    **拆分示例思维**：
    原文："A有三个特点：X、Y、Z"
    → 思考：这里有1个总述 + 3个具体特点 = 4个独立信息
    → 提取：4个事项（或者3个事项，如果总述信息量不足）

    === 事项的本质 ===

    每个事项应该是：
    - **独立的**：可以脱离上下文被理解
    - **完整的**：包含必要的上下文信息
    - **原子的**：不可再分的最小信息单元
    - **真实的**：完全来自原文，忠实记录
    - **有用的**：可以被独立检索和引用

    事项应包含的字段：
    - **title**: 事项标题（简洁概括）
    - **summary**: 事项摘要（可选，简短说明）
    - **content**: 事项详细内容（主体）
    - **category**: 事项分类（4-6个字）
    - **references**: 引用的片段编号列表
    - **entities**: 提取的实体

    === 实体（Entity）提取 ===

    按以下维度从事项中提取实体：

    {entity_types}

    实体提取要点：
    - 使用原文表述，同一实体的不同表述统一为最完整形式
    - **为每个实体提取简短描述**（可选，如果原文中有相关上下文，如职位、角色、定义等）
    - 实体格式：`{{"name": "实体名称", "description": "实体描述（可选）"}}`
    - 如果没有描述信息，description可以为空字符串

    === 文章片段 ===

    {context}

    === 拆分示例 ===

    原文："MoE有两个关键部分。第一是稀疏层，代替FFN层。第二是门控网络，负责路由。MoE的优势包括高效预训练和快速推理，但面临泛化不足的挑战。"

    拆分思路：这段话包含约8个独立信息点：
    1. MoE有两个部分（总述）
    2. 第一个部分是稀疏层
    3. 稀疏层代替FFN层（功能）
    4. 第二个部分是门控网络
    5. 门控网络负责路由（功能）
    6. 优势：高效预训练
    7. 优势：快速推理
    8. 挑战：泛化不足

    → 建议提取6-8个事项（总述可选，视信息量而定）

    === 开始提取 ===

    请按照上述原则提取事项，并在完成后进行快速检查：

    **最终检查**：
    - 上面提供的每个片段（1、2、3...）是否都在至少一个事项的section_ids中出现？
    - 如果某个片段编号没有被引用，说明该片段的内容被遗漏了，必须补充提取

    请严格按照JSON Schema格式返回结果。

    记住三个关键词：
    - **拆细**：尽可能拆分到最小单元
    - **完整**：不遗漏任何片段和信息
    - **忠实**：只提取不创作
